(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[272],{7722:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pdf-chat",function(){return t(9816)}])},9816:function(e,n,t){"use strict";t.r(n);var a=t(5893),s=t(7294),i=t(1341),o=t(9015),r=t.n(o);n.default=()=>{let[e,n]=(0,s.useState)(""),[t,o]=(0,s.useState)([]),[d,l]=(0,s.useState)(""),[_,c]=(0,s.useState)(!1),u=(0,s.useRef)(null),h=new i.$D("AIzaSyB5XbgFLtRN87yekbvViH1QOYvm3zksYik").getGenerativeModel({model:"gemini-pro"}),p=async()=>{if(d.trim()&&e){l(""),o(e=>[...e,{role:"user",content:d}]),c(!0);try{var n,t,a;let e=null===(a=u.current)||void 0===a?void 0:null===(t=a.contentWindow)||void 0===t?void 0:null===(n=t.document.querySelector(".page"))||void 0===n?void 0:n.id,s="You are a helpful assistant analyzing a PDF document. \n        The user is currently viewing page ".concat(e||"unknown"," of the PDF. Do not mention name of this PDF in your response by any means.\n        User question: ").concat(d,"\n        Please provide a detailed response based on the PDF content."),i=await h.generateContent(s),r=(await i.response).text();o(e=>[...e,{role:"assistant",content:r}])}catch(e){console.error("Error generating response:",e),o(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error while processing your request."}])}finally{c(!1)}}};return(0,a.jsxs)("div",{className:r().container,children:[(0,a.jsxs)("div",{className:r().pdfContainer,children:[(0,a.jsx)("div",{className:r().uploadSection,children:(0,a.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&n(URL.createObjectURL(a))},className:r().fileInput})}),e?(0,a.jsx)("iframe",{ref:u,src:e,className:r().pdfViewer,title:"PDF Viewer"}):(0,a.jsx)("div",{className:r().placeholder,children:(0,a.jsx)("p",{children:"Upload a PDF to start analyzing"})})]}),(0,a.jsxs)("div",{className:r().chatContainer,children:[(0,a.jsxs)("div",{className:r().messages,children:[t.map((e,n)=>(0,a.jsx)("div",{className:"".concat(r().message," ").concat("user"===e.role?r().userMessage:r().assistantMessage),children:(0,a.jsx)("p",{children:e.content})},n)),_&&(0,a.jsx)("div",{className:r().loading,children:(0,a.jsx)("div",{className:r().spinner})})]}),(0,a.jsxs)("div",{className:r().inputContainer,children:[(0,a.jsx)("input",{type:"text",value:d,onChange:e=>l(e.target.value),onKeyPress:e=>"Enter"===e.key&&p(),placeholder:"Ask a question about the PDF...",className:r().input,disabled:!e}),(0,a.jsx)("button",{onClick:p,disabled:!e||_,className:r().sendButton,children:"Send"})]})]})]})}},9015:function(e){e.exports={container:"PdfChat_container__UWqNE",pdfContainer:"PdfChat_pdfContainer__k3pEA",uploadSection:"PdfChat_uploadSection__qw_lY",fileInput:"PdfChat_fileInput__GWp0e",pdfViewer:"PdfChat_pdfViewer__J_Qo3",placeholder:"PdfChat_placeholder__ncvjO",chatContainer:"PdfChat_chatContainer__X82NH",chatHeader:"PdfChat_chatHeader__xGUfv",closeButton:"PdfChat_closeButton__Hws6B",messagesContainer:"PdfChat_messagesContainer__p89v1",welcomeMessage:"PdfChat_welcomeMessage__FTiiX",message:"PdfChat_message__BMA6d",userMessage:"PdfChat_userMessage__pciZ_",assistantMessage:"PdfChat_assistantMessage__moFYF",messageContent:"PdfChat_messageContent__ei9S7",loadingMessage:"PdfChat_loadingMessage__RhFAf",spinner:"PdfChat_spinner__cnC3n",spin:"PdfChat_spin__zzNkN",errorMessage:"PdfChat_errorMessage__BfXyu",inputContainer:"PdfChat_inputContainer__qiGnn",input:"PdfChat_input__mJtCV",sendButton:"PdfChat_sendButton__oTpUc",loginPrompt:"PdfChat_loginPrompt__eAlrL",loginButtons:"PdfChat_loginButtons__tI4b3",loginButton:"PdfChat_loginButton__SVBOg",signupButton:"PdfChat_signupButton__6_KUw"}}},function(e){e.O(0,[341,888,774,179],function(){return e(e.s=7722)}),_N_E=e.O()}]);